# esp_now_ros

## Packet Specification

### Test Packet

```
   +----------------------+------------------------------------+----------------------------------+------------------------------------------+
   | PACKET_TYPE (2 byte unsigned int) | Integer number = -120 (4 byte signed int) | Float number -1.0 (4 byte float) | String (Hello, world!) (64 bytes String) |
   +----------------------+------------------------------------+----------------------------------+------------------------------------------+
```

### Emergency Packet

```
   +----------------------+----------------------------+--------------------------+----------------------------+
   | PACKET_TYPE (2 byte) | MAP_FRAME (64 byte String) | POS_X, Y, Z (4 byte x 3) | ROT_X, Y, Z, W (4byte x 4) |
   +----------------------+----------------------------+--------------------------+----------------------------+
```

### Task Dispatcher Packet

```
   +----------------------+------------------------------+------------------------------+----------------------------+--------------------+
   | PACKET_TYPE (2 byte) | Caller name (16 byte String) | Target name (16 byte String) | Task name (16 byte String) | Task Args (String) |
   +----------------------+------------------------------+------------------------------+----------------------------+--------------------+
```

### Task Result Packet

```
   +----------------------+------------------------------+------------------------------+-----------------------+
   | PACKET_TYPE (2 byte) | Caller name (16 byte String) | Target name (16 byte String) | Task name (4byte x 4) |
   +----------------------+------------------------------+------------------------------+-----------------------+
```

### ROS Bridge packets

- 1st

```
   +----------------------+----------------+------------------+---------------------+
   | PACKET_TYPE (2 byte) | Stamp (4 byte) | DATA_ID (4 byte) | TOPIC_TYPE (String) |
   +----------------------+----------------+------------------+---------------------+
```

- 2nd

```
   +----------------------+----------------+------------------+---------------------+
   | PACKET_TYPE (2 byte) | Stamp (4 byte) | DATA_ID (4 byte) | TOPIC_NAME (String) |
   +----------------------+----------------+------------------+---------------------+
```

- 3rd

```
   +----------------------+----------------+------------------+--------------------------+
   | PACKET_TYPE (2 byte) | Stamp (4 byte) | DATA_ID (4 byte) | SERIALIZED_DATA (String) |
   +----------------------+----------------+------------------+--------------------------+
```

### Sensor modules

- ENV III Packet

```
     +----------------------+--------------------+-------------------+
     | PACKET_TYPE (2 byte) | MODULE_ID (4 byte) | PRESSURE (4 byte) |
     +----------------------+--------------------+-------------------+
```

- IMU Packet

```
     +----------------------+--------------------+-------------------+
     | PACKET_TYPE (2 byte) | MODULE_ID (4 byte) | PRESSURE (4 byte) |
     +----------------------+--------------------+-------------------+
```
